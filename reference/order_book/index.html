
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Core simulation engine, matching logic, and reference tools for a role-based, options market-making game">
      
      
      
      
        <link rel="prev" href="../../technical/reference/math-examples/">
      
      
        <link rel="next" href="../order/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Order Book - Intern Trading Game</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#order_book" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Intern Trading Game" class="md-header__button md-logo" aria-label="Intern Trading Game" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Intern Trading Game
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Order Book
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/yourusername/Intern-Trading-Game" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Intern-Trading-Game
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Intern Trading Game" class="md-nav__button md-logo" aria-label="Intern Trading Game" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Intern Trading Game
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/yourusername/Intern-Trading-Game" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Intern-Trading-Game
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Game Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Game Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Fundamentals
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Fundamentals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/fundamentals/core-concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Core Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/fundamentals/game-mechanics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Game Mechanics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/fundamentals/market-structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Market Structure
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Trading
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Trading
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/trading/order-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Order Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/trading/constraints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constraints
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/trading/execution-rules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execution Rules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/trading/signals-access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Signal Access
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Roles
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Roles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/roles/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/roles/market-maker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Market Maker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/roles/hedge-fund/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hedge Fund
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/roles/arbitrage-desk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arbitrage Desk
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/roles/retail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Retail
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Simulation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Simulation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/simulation/price-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Price Generation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/simulation/volatility-regimes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Volatility Regimes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/simulation/news-events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    News Events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/simulation/correlation-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Correlation Model
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Scoring
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Scoring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/scoring/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/configuration/game-parameters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Game Parameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/configuration/example-config.yaml" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Example Config
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Appendix
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Appendix
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/appendix/probability-tables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Probability Tables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/appendix/formulas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Formulas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../game/appendix/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../technical/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Technical Documentation
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Technical Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/architecture-v3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Current Version (v3)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/architecture-v2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Previous Version (v2)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Original Version (v1)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/build-order/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build Order
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/implementation-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Implementation Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/tutorials/market-maker-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Market Maker Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../technical/how-to/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    How-To Guides
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            How-To Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/how-to/how-to-submit-orders/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to Submit Orders
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/how-to/use-rest-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use REST API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/how-to/use-websockets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use WebSockets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/how-to/websocket-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebSocket Integration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../technical/reference/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/reference/api-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/reference/exchange-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exchange API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/reference/rest-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    REST API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/reference/websocket-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebSocket API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/reference/validation-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validation API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/reference/math-examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Math Examples
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" checked>
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference (Generated)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            API Reference (Generated)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Order Book
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Order Book
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book" class="md-nav__link">
    <span class="md-ellipsis">
      order_book
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook" class="md-nav__link">
    <span class="md-ellipsis">
      OrderBook
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OrderBook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.add_order" class="md-nav__link">
    <span class="md-ellipsis">
      add_order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.best_ask" class="md-nav__link">
    <span class="md-ellipsis">
      best_ask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.best_bid" class="md-nav__link">
    <span class="md-ellipsis">
      best_bid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.cancel_order" class="md-nav__link">
    <span class="md-ellipsis">
      cancel_order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.depth_snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      depth_snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.get_order" class="md-nav__link">
    <span class="md-ellipsis">
      get_order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.get_recent_trades" class="md-nav__link">
    <span class="md-ellipsis">
      get_recent_trades
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.PriceLevel" class="md-nav__link">
    <span class="md-ellipsis">
      PriceLevel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PriceLevel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.PriceLevel-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.PriceLevel.add_order" class="md-nav__link">
    <span class="md-ellipsis">
      add_order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.PriceLevel.is_empty" class="md-nav__link">
    <span class="md-ellipsis">
      is_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.PriceLevel.remove_order" class="md-nav__link">
    <span class="md-ellipsis">
      remove_order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.PriceLevel.update_quantity" class="md-nav__link">
    <span class="md-ellipsis">
      update_quantity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../order/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Order
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../trade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trade
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../venue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Venue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../instrument/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Instrument
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../technical/explanation/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Explanation
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            Explanation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/explanation/order-matching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Order Matching
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/explanation/batch-matching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Batch Matching
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/explanation/order-validator-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Order Validator Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/explanation/trading-phases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trading Phases
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/contributing/docstring-math-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Math in Docstrings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book" class="md-nav__link">
    <span class="md-ellipsis">
      order_book
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook" class="md-nav__link">
    <span class="md-ellipsis">
      OrderBook
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OrderBook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.add_order" class="md-nav__link">
    <span class="md-ellipsis">
      add_order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.best_ask" class="md-nav__link">
    <span class="md-ellipsis">
      best_ask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.best_bid" class="md-nav__link">
    <span class="md-ellipsis">
      best_bid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.cancel_order" class="md-nav__link">
    <span class="md-ellipsis">
      cancel_order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.depth_snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      depth_snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.get_order" class="md-nav__link">
    <span class="md-ellipsis">
      get_order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.OrderBook.get_recent_trades" class="md-nav__link">
    <span class="md-ellipsis">
      get_recent_trades
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.PriceLevel" class="md-nav__link">
    <span class="md-ellipsis">
      PriceLevel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PriceLevel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.PriceLevel-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.PriceLevel.add_order" class="md-nav__link">
    <span class="md-ellipsis">
      add_order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.PriceLevel.is_empty" class="md-nav__link">
    <span class="md-ellipsis">
      is_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.PriceLevel.remove_order" class="md-nav__link">
    <span class="md-ellipsis">
      remove_order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intern_trading_game.domain.exchange.order_book.PriceLevel.update_quantity" class="md-nav__link">
    <span class="md-ellipsis">
      update_quantity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="order_book">Order_Book</h1>


<div class="doc doc-object doc-module">



<a id="intern_trading_game.domain.exchange.order_book"></a>
    <div class="doc doc-contents first">

        <p>OrderBook module for the Intern Trading Game.</p>
<p>This module defines the OrderBook class, which maintains the order book for a
single instrument.</p>









  <div class="doc doc-children">






<h3 id="intern_trading_game.domain.exchange.order_book-classes">Classes</h3>

<div class="doc doc-object doc-class">



<h4 id="intern_trading_game.domain.exchange.order_book.OrderBook" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">OrderBook</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">OrderBook</span><span class="p">(</span><span class="n">instrument_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Maintains the order book for a single instrument.</p>
<p>The order book keeps track of all open orders for an instrument,
matches incoming orders against existing orders, and generates trades.
It implements a price-time priority matching algorithm, where orders
are matched first by price (highest bid, lowest ask) and then by time
(first in, first out).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>instrument_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the instrument this order book is for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="intern_trading_game.domain.exchange.order_book.OrderBook.instrument_id">instrument_id</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the instrument this order book is for.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="intern_trading_game.domain.exchange.order_book.OrderBook.bids">bids</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="PriceLevel


  
      dataclass
   (intern_trading_game.domain.exchange.order_book.PriceLevel)" href="#intern_trading_game.domain.exchange.order_book.PriceLevel">PriceLevel</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Price levels for buy orders, sorted by price in descending order.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="intern_trading_game.domain.exchange.order_book.OrderBook.asks">asks</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="PriceLevel


  
      dataclass
   (intern_trading_game.domain.exchange.order_book.PriceLevel)" href="#intern_trading_game.domain.exchange.order_book.PriceLevel">PriceLevel</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Price levels for sell orders, sorted by price in ascending order.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="intern_trading_game.domain.exchange.order_book.OrderBook.order_price_map">order_price_map</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maps order IDs to their price levels for quick lookup.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="intern_trading_game.domain.exchange.order_book.OrderBook.order_ids">order_ids</span></code></td>
            <td>
                  <code><span title="typing.Set">Set</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Set of order IDs in this book.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="intern_trading_game.domain.exchange.order_book.OrderBook.trades">trades</span></code></td>
            <td>
                  <code><span title="collections.deque">deque</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Recent trades, limited to the last 100.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>The order book maintains two separate lists of price levels: one for bids
(buy orders) and one for asks (sell orders). Each price level contains
a queue of orders at that price, sorted by time priority.</p>
<p>The matching algorithm follows these steps:</p>
<ol>
<li>Determine the opposite side of the book to match against</li>
<li>Check if the incoming order's price is acceptable</li>
<li>Match against the best price level until filled or no more matches</li>
<li>Add any remaining quantity to the book (for limit orders)</li>
</ol>
</details>

<details class="tradingcontext" open>
  <summary>TradingContext</summary>
  <p>This order book implementation assumes:
- Continuous trading (no auctions or circuit breakers)
- No self-trade prevention
- No iceberg or hidden orders
- No minimum tick size enforcement
- No position limits or risk checks</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">OrderBook</span><span class="p">(</span><span class="s2">&quot;AAPL&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">buy_order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span><span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="s2">&quot;buy&quot;</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span> <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader1&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">trades</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">buy_order</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">sell_order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span><span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="s2">&quot;sell&quot;</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span> <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader2&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">trades</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">sell_order</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">trades</span><span class="p">))</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="go">1</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">trades</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">quantity</span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="go">5</span>
</code></pre></div>

        <p>Initialize an order book for an instrument.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>instrument_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the instrument this order book is for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>This constructor initializes empty bid and ask sides of the book,
as well as data structures for tracking orders and trades.</p>
</details>






                  <details class="quote">
                    <summary>Source code in <code>src/intern_trading_game/domain/exchange/order_book.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instrument_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a><span class="sd">    Initialize an order book for an instrument.</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a><span class="sd">    instrument_id : str</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a><span class="sd">        The ID of the instrument this order book is for.</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a><span class="sd">    -----</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a><span class="sd">    This constructor initializes empty bid and ask sides of the book,</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a><span class="sd">    as well as data structures for tracking orders and trades.</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">instrument_id</span> <span class="o">=</span> <span class="n">instrument_id</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>    <span class="c1"># Price levels sorted by price</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>    <span class="c1"># (ascending for asks, descending for bids)</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>    <span class="c1"># Highest bid first, lowest ask first</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">bids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">PriceLevel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Highest bid first</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">asks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">PriceLevel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Lowest ask first</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>    <span class="c1"># Maps order IDs to their price levels for quick lookup</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">order_price_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>    <span class="c1"># Set of order IDs in this book</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">order_ids</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>    <span class="c1"># Recent trades</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">trades</span><span class="p">:</span> <span class="n">deque</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<h5 id="intern_trading_game.domain.exchange.order_book.OrderBook-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="intern_trading_game.domain.exchange.order_book.OrderBook.add_order" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_order</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">add_order</span><span class="p">(</span><span class="n">order</span><span class="p">:</span> <span class="n">Order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Trade</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Add an order to the book and attempt to match it.</p>
<p>This is the main entry point for adding orders to the order book.
The method first validates the order, then attempts to match it against
existing orders on the opposite side of the book. If the order is not
fully filled and it's a limit order, the remaining quantity is added
to the book.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>order</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Order


  
      dataclass
   (intern_trading_game.domain.exchange.order.Order)" href="../order/#intern_trading_game.domain.exchange.order.Order">Order</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The order to add to the book. Must have the same instrument_id as
the order book and a unique order_id.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Trade


  
      dataclass
   (intern_trading_game.domain.exchange.trade.Trade)" href="../trade/#intern_trading_game.domain.exchange.trade.Trade">Trade</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of trades that were generated from matching the order.
Empty list if no matches were found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the order's instrument_id doesn't match the book's instrument_id
or if the order_id already exists in the book.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>The order matching process follows price-time priority:</p>
<ol>
<li>For buy orders, match against asks in ascending price order</li>
<li>For sell orders, match against bids in descending price order</li>
<li>At each price level, match against orders in time priority (FIFO)</li>
</ol>
<p>Market orders are always matched immediately at the best available price,
while limit orders are only matched if the price is acceptable.</p>
</details>

<details class="tradingcontext" open>
  <summary>TradingContext</summary>
  <p>This method assumes:
- Orders are validated before submission
- No position limits or risk checks
- No fees or commissions
- Continuous trading (no auction periods)</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">OrderBook</span><span class="p">(</span><span class="s2">&quot;AAPL&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Add a limit sell order</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">sell_order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;sell&quot;</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">... </span>    <span class="n">quantity</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span>    <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader1&quot;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">trades</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">sell_order</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">trades</span><span class="p">))</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="go">0</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Add a matching buy order</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">buy_order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="gp">... </span>    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;buy&quot;</span><span class="p">,</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="gp">... </span>    <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="gp">... </span>    <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader2&quot;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">trades</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">buy_order</span><span class="p">)</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">trades</span><span class="p">))</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="go">1</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">trades</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">quantity</span><span class="p">)</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="go">5</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/intern_trading_game/domain/exchange/order_book.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="k">def</span><span class="w"> </span><span class="nf">add_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">Order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Trade</span><span class="p">]:</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><span class="sd">    Add an order to the book and attempt to match it.</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a><span class="sd">    This is the main entry point for adding orders to the order book.</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="sd">    The method first validates the order, then attempts to match it against</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a><span class="sd">    existing orders on the opposite side of the book. If the order is not</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="sd">    fully filled and it&#39;s a limit order, the remaining quantity is added</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="sd">    to the book.</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="sd">    order : Order</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><span class="sd">        The order to add to the book. Must have the same instrument_id as</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="sd">        the order book and a unique order_id.</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">    -------</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="sd">    List[Trade]</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="sd">        A list of trades that were generated from matching the order.</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">        Empty list if no matches were found.</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">    Raises</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">    ------</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="sd">    ValueError</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><span class="sd">        If the order&#39;s instrument_id doesn&#39;t match the book&#39;s instrument_id</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="sd">        or if the order_id already exists in the book.</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><span class="sd">    -----</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="sd">    The order matching process follows price-time priority:</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">    1. For buy orders, match against asks in ascending price order</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="sd">    2. For sell orders, match against bids in descending price order</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="sd">    3. At each price level, match against orders in time priority (FIFO)</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a><span class="sd">    Market orders are always matched immediately at the best available price,</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a><span class="sd">    while limit orders are only matched if the price is acceptable.</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a><span class="sd">    TradingContext</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="sd">    --------------</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="sd">    This method assumes:</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="sd">    - Orders are validated before submission</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="sd">    - No position limits or risk checks</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="sd">    - No fees or commissions</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="sd">    - Continuous trading (no auction periods)</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a><span class="sd">    Examples</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="sd">    --------</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="sd">    &gt;&gt;&gt; book = OrderBook(&quot;AAPL&quot;)</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a><span class="sd">    &gt;&gt;&gt; # Add a limit sell order</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a><span class="sd">    &gt;&gt;&gt; sell_order = Order(</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a><span class="sd">    ...     instrument_id=&quot;AAPL&quot;,</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a><span class="sd">    ...     side=&quot;sell&quot;,</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="sd">    ...     quantity=10,</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="sd">    ...     price=150.0,</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a><span class="sd">    ...     trader_id=&quot;trader1&quot;</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a><span class="sd">    ... )</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a><span class="sd">    &gt;&gt;&gt; trades = book.add_order(sell_order)</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a><span class="sd">    &gt;&gt;&gt; print(len(trades))</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a><span class="sd">    0</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a><span class="sd">    &gt;&gt;&gt; # Add a matching buy order</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="sd">    &gt;&gt;&gt; buy_order = Order(</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="sd">    ...     instrument_id=&quot;AAPL&quot;,</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a><span class="sd">    ...     side=&quot;buy&quot;,</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a><span class="sd">    ...     quantity=5,</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a><span class="sd">    ...     price=150.0,</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a><span class="sd">    ...     trader_id=&quot;trader2&quot;</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a><span class="sd">    ... )</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="sd">    &gt;&gt;&gt; trades = book.add_order(buy_order)</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a><span class="sd">    &gt;&gt;&gt; print(len(trades))</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">    1</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a><span class="sd">    &gt;&gt;&gt; print(trades[0].quantity)</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="sd">    5</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>    <span class="c1"># Validate order</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>    <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">instrument_id</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_id</span><span class="p">:</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>            <span class="sa">f</span><span class="s2">&quot;Order instrument </span><span class="si">{</span><span class="n">order</span><span class="o">.</span><span class="n">instrument_id</span><span class="si">}</span><span class="s2"> does not match &quot;</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>            <span class="sa">f</span><span class="s2">&quot;book instrument </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">instrument_id</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>        <span class="p">)</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>    <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">order_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_ids</span><span class="p">:</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>            <span class="sa">f</span><span class="s2">&quot;Order ID </span><span class="si">{</span><span class="n">order</span><span class="o">.</span><span class="n">order_id</span><span class="si">}</span><span class="s2"> already exists in the book&quot;</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>        <span class="p">)</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>    <span class="c1"># Try to match the order first</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>    <span class="n">trades</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_match_order</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>    <span class="c1"># If the order wasn&#39;t fully filled, add the remainder to the book</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">order</span><span class="o">.</span><span class="n">is_filled</span> <span class="ow">and</span> <span class="n">order</span><span class="o">.</span><span class="n">is_limit_order</span><span class="p">:</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_insert_order</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>    <span class="k">return</span> <span class="n">trades</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intern_trading_game.domain.exchange.order_book.OrderBook.best_ask" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">best_ask</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">best_ask</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the best (lowest) ask price and quantity.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple containing (price, quantity) of the best ask, or None if
there are no asks in the book.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>The best ask is the lowest price at which someone is willing to sell.
This is always the first price level in the asks list, since it's
sorted in ascending order.</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">OrderBook</span><span class="p">(</span><span class="s2">&quot;AAPL&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">best_ask</span><span class="p">()</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="go">None</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span>    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;sell&quot;</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">... </span>    <span class="n">quantity</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">... </span>    <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader1&quot;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="go">[]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">best_ask</span><span class="p">()</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="go">(150.0, 10.0)</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/intern_trading_game/domain/exchange/order_book.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span>
<span class="normal"><a href="#__codelineno-0-705">705</a></span>
<span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span>
<span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span>
<span class="normal"><a href="#__codelineno-0-714">714</a></span>
<span class="normal"><a href="#__codelineno-0-715">715</a></span>
<span class="normal"><a href="#__codelineno-0-716">716</a></span>
<span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span>
<span class="normal"><a href="#__codelineno-0-733">733</a></span>
<span class="normal"><a href="#__codelineno-0-734">734</a></span>
<span class="normal"><a href="#__codelineno-0-735">735</a></span>
<span class="normal"><a href="#__codelineno-0-736">736</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-700" name="__codelineno-0-700"></a><span class="k">def</span><span class="w"> </span><span class="nf">best_ask</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a><span class="sd">    Get the best (lowest) ask price and quantity.</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a><span class="sd">    -------</span>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a><span class="sd">    Optional[Tuple[float, float]]</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a><span class="sd">        A tuple containing (price, quantity) of the best ask, or None if</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a><span class="sd">        there are no asks in the book.</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a><span class="sd">    -----</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a><span class="sd">    The best ask is the lowest price at which someone is willing to sell.</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a><span class="sd">    This is always the first price level in the asks list, since it&#39;s</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a><span class="sd">    sorted in ascending order.</span>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a><span class="sd">    Examples</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a><span class="sd">    --------</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="sd">    &gt;&gt;&gt; book = OrderBook(&quot;AAPL&quot;)</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a><span class="sd">    &gt;&gt;&gt; book.best_ask()</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a><span class="sd">    None</span>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a><span class="sd">    &gt;&gt;&gt; order = Order(</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a><span class="sd">    ...     instrument_id=&quot;AAPL&quot;,</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a><span class="sd">    ...     side=&quot;sell&quot;,</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a><span class="sd">    ...     quantity=10,</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a><span class="sd">    ...     price=150.0,</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a><span class="sd">    ...     trader_id=&quot;trader1&quot;</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a><span class="sd">    ... )</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a><span class="sd">    &gt;&gt;&gt; book.add_order(order)</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a><span class="sd">    []</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a><span class="sd">    &gt;&gt;&gt; book.best_ask()</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a><span class="sd">    (150.0, 10.0)</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">asks</span><span class="p">:</span>
<a id="__codelineno-0-734" name="__codelineno-0-734"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-735" name="__codelineno-0-735"></a>    <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">asks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a>    <span class="k">return</span> <span class="p">(</span><span class="n">level</span><span class="o">.</span><span class="n">price</span><span class="p">,</span> <span class="n">level</span><span class="o">.</span><span class="n">total_quantity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intern_trading_game.domain.exchange.order_book.OrderBook.best_bid" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">best_bid</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">best_bid</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the best (highest) bid price and quantity.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple containing (price, quantity) of the best bid, or None if
there are no bids in the book.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>The best bid is the highest price at which someone is willing to buy.
This is always the first price level in the bids list, since it's
sorted in descending order.</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">OrderBook</span><span class="p">(</span><span class="s2">&quot;AAPL&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">best_bid</span><span class="p">()</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="go">None</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span>    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;buy&quot;</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">... </span>    <span class="n">quantity</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">... </span>    <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader1&quot;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="go">[]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">best_bid</span><span class="p">()</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="go">(150.0, 10.0)</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/intern_trading_game/domain/exchange/order_book.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span>
<span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-662" name="__codelineno-0-662"></a><span class="k">def</span><span class="w"> </span><span class="nf">best_bid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a><span class="sd">    Get the best (highest) bid price and quantity.</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a><span class="sd">    -------</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a><span class="sd">    Optional[Tuple[float, float]]</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a><span class="sd">        A tuple containing (price, quantity) of the best bid, or None if</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a><span class="sd">        there are no bids in the book.</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a><span class="sd">    -----</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a><span class="sd">    The best bid is the highest price at which someone is willing to buy.</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a><span class="sd">    This is always the first price level in the bids list, since it&#39;s</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a><span class="sd">    sorted in descending order.</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a><span class="sd">    Examples</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a><span class="sd">    --------</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a><span class="sd">    &gt;&gt;&gt; book = OrderBook(&quot;AAPL&quot;)</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a><span class="sd">    &gt;&gt;&gt; book.best_bid()</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a><span class="sd">    None</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a><span class="sd">    &gt;&gt;&gt; order = Order(</span>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="sd">    ...     instrument_id=&quot;AAPL&quot;,</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="sd">    ...     side=&quot;buy&quot;,</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a><span class="sd">    ...     quantity=10,</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a><span class="sd">    ...     price=150.0,</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">    ...     trader_id=&quot;trader1&quot;</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="sd">    ... )</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="sd">    &gt;&gt;&gt; book.add_order(order)</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a><span class="sd">    []</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a><span class="sd">    &gt;&gt;&gt; book.best_bid()</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a><span class="sd">    (150.0, 10.0)</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">bids</span><span class="p">:</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a>    <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a>    <span class="k">return</span> <span class="p">(</span><span class="n">level</span><span class="o">.</span><span class="n">price</span><span class="p">,</span> <span class="n">level</span><span class="o">.</span><span class="n">total_quantity</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intern_trading_game.domain.exchange.order_book.OrderBook.cancel_order" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">cancel_order</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">cancel_order</span><span class="p">(</span><span class="n">order_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Order</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Cancel and remove an order from the book.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>order_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the order to cancel.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="Order


  
      dataclass
   (intern_trading_game.domain.exchange.order.Order)" href="../order/#intern_trading_game.domain.exchange.order.Order">Order</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The cancelled order, or None if not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>This method removes the order from the book and updates all relevant
data structures. If the price level becomes empty after removing the
order, the price level is also removed.</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">OrderBook</span><span class="p">(</span><span class="s2">&quot;AAPL&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;buy&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span>    <span class="n">quantity</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">... </span>    <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader1&quot;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="go">[]</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">cancelled</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">cancel_order</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">order_id</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">cancelled</span><span class="o">.</span><span class="n">order_id</span> <span class="o">==</span> <span class="n">order</span><span class="o">.</span><span class="n">order_id</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="go">True</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/intern_trading_game/domain/exchange/order_book.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="k">def</span><span class="w"> </span><span class="nf">cancel_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Order</span><span class="p">]:</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">    Cancel and remove an order from the book.</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">    order_id : str</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="sd">        The ID of the order to cancel.</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="sd">    -------</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="sd">    Optional[Order]</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="sd">        The cancelled order, or None if not found.</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="sd">    -----</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="sd">    This method removes the order from the book and updates all relevant</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="sd">    data structures. If the price level becomes empty after removing the</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a><span class="sd">    order, the price level is also removed.</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">    Examples</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="sd">    --------</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="sd">    &gt;&gt;&gt; book = OrderBook(&quot;AAPL&quot;)</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a><span class="sd">    &gt;&gt;&gt; order = Order(</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="sd">    ...     instrument_id=&quot;AAPL&quot;,</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">    ...     side=&quot;buy&quot;,</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">    ...     quantity=10,</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">    ...     price=150.0,</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="sd">    ...     trader_id=&quot;trader1&quot;</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="sd">    ... )</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a><span class="sd">    &gt;&gt;&gt; book.add_order(order)</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a><span class="sd">    []</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><span class="sd">    &gt;&gt;&gt; cancelled = book.cancel_order(order.order_id)</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="sd">    &gt;&gt;&gt; cancelled.order_id == order.order_id</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a><span class="sd">    True</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>    <span class="k">if</span> <span class="n">order_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_price_map</span><span class="p">:</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>    <span class="n">price</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_price_map</span><span class="p">[</span><span class="n">order_id</span><span class="p">]</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>    <span class="n">order_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bids</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_bid_price</span><span class="p">(</span><span class="n">price</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">asks</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>    <span class="c1"># Find the price level</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>    <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">order_list</span><span class="p">:</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>        <span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">price</span> <span class="o">==</span> <span class="n">price</span><span class="p">:</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>            <span class="n">order</span> <span class="o">=</span> <span class="n">level</span><span class="o">.</span><span class="n">remove_order</span><span class="p">(</span><span class="n">order_id</span><span class="p">)</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>            <span class="k">if</span> <span class="n">order</span><span class="p">:</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_price_map</span><span class="p">[</span><span class="n">order_id</span><span class="p">]</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">order_ids</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">order_id</span><span class="p">)</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>                <span class="c1"># Remove empty price levels</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>                <span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>                    <span class="n">order_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>                <span class="k">return</span> <span class="n">order</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>            <span class="k">break</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intern_trading_game.domain.exchange.order_book.OrderBook.depth_snapshot" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">depth_snapshot</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">depth_snapshot</span><span class="p">(</span><span class="n">levels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get a snapshot of the order book depth.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>levels</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of price levels to include in the snapshot.</p>
              </div>
            </td>
            <td>
                  <code>5</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="typing.Tuple">Tuple</span>[<span title="float">float</span>, <span title="float">float</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary with 'bids' and 'asks' keys, each with a list of
(price, quantity) tuples representing the order book depth.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>This method provides a view of the current state of the order book,
showing the available liquidity at different price levels. This is
useful for market data display and analysis.</p>
<p>The depth snapshot is often used to create a "market depth" or "level 2"
view of the market, showing the available liquidity at different price
points.</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">OrderBook</span><span class="p">(</span><span class="s2">&quot;AAPL&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">buy_order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;buy&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span>    <span class="n">quantity</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">... </span>    <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader1&quot;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">buy_order</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="go">[]</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">sell_order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">... </span>    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;sell&quot;</span><span class="p">,</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="gp">... </span>    <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mf">151.0</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="gp">... </span>    <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader2&quot;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">sell_order</span><span class="p">)</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="go">[]</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">depth</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">depth_snapshot</span><span class="p">()</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">depth</span><span class="p">[</span><span class="s2">&quot;bids&quot;</span><span class="p">]</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="go">[(150.0, 10.0)]</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">depth</span><span class="p">[</span><span class="s2">&quot;asks&quot;</span><span class="p">]</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="go">[(151.0, 5.0)]</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/intern_trading_game/domain/exchange/order_book.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-738">738</a></span>
<span class="normal"><a href="#__codelineno-0-739">739</a></span>
<span class="normal"><a href="#__codelineno-0-740">740</a></span>
<span class="normal"><a href="#__codelineno-0-741">741</a></span>
<span class="normal"><a href="#__codelineno-0-742">742</a></span>
<span class="normal"><a href="#__codelineno-0-743">743</a></span>
<span class="normal"><a href="#__codelineno-0-744">744</a></span>
<span class="normal"><a href="#__codelineno-0-745">745</a></span>
<span class="normal"><a href="#__codelineno-0-746">746</a></span>
<span class="normal"><a href="#__codelineno-0-747">747</a></span>
<span class="normal"><a href="#__codelineno-0-748">748</a></span>
<span class="normal"><a href="#__codelineno-0-749">749</a></span>
<span class="normal"><a href="#__codelineno-0-750">750</a></span>
<span class="normal"><a href="#__codelineno-0-751">751</a></span>
<span class="normal"><a href="#__codelineno-0-752">752</a></span>
<span class="normal"><a href="#__codelineno-0-753">753</a></span>
<span class="normal"><a href="#__codelineno-0-754">754</a></span>
<span class="normal"><a href="#__codelineno-0-755">755</a></span>
<span class="normal"><a href="#__codelineno-0-756">756</a></span>
<span class="normal"><a href="#__codelineno-0-757">757</a></span>
<span class="normal"><a href="#__codelineno-0-758">758</a></span>
<span class="normal"><a href="#__codelineno-0-759">759</a></span>
<span class="normal"><a href="#__codelineno-0-760">760</a></span>
<span class="normal"><a href="#__codelineno-0-761">761</a></span>
<span class="normal"><a href="#__codelineno-0-762">762</a></span>
<span class="normal"><a href="#__codelineno-0-763">763</a></span>
<span class="normal"><a href="#__codelineno-0-764">764</a></span>
<span class="normal"><a href="#__codelineno-0-765">765</a></span>
<span class="normal"><a href="#__codelineno-0-766">766</a></span>
<span class="normal"><a href="#__codelineno-0-767">767</a></span>
<span class="normal"><a href="#__codelineno-0-768">768</a></span>
<span class="normal"><a href="#__codelineno-0-769">769</a></span>
<span class="normal"><a href="#__codelineno-0-770">770</a></span>
<span class="normal"><a href="#__codelineno-0-771">771</a></span>
<span class="normal"><a href="#__codelineno-0-772">772</a></span>
<span class="normal"><a href="#__codelineno-0-773">773</a></span>
<span class="normal"><a href="#__codelineno-0-774">774</a></span>
<span class="normal"><a href="#__codelineno-0-775">775</a></span>
<span class="normal"><a href="#__codelineno-0-776">776</a></span>
<span class="normal"><a href="#__codelineno-0-777">777</a></span>
<span class="normal"><a href="#__codelineno-0-778">778</a></span>
<span class="normal"><a href="#__codelineno-0-779">779</a></span>
<span class="normal"><a href="#__codelineno-0-780">780</a></span>
<span class="normal"><a href="#__codelineno-0-781">781</a></span>
<span class="normal"><a href="#__codelineno-0-782">782</a></span>
<span class="normal"><a href="#__codelineno-0-783">783</a></span>
<span class="normal"><a href="#__codelineno-0-784">784</a></span>
<span class="normal"><a href="#__codelineno-0-785">785</a></span>
<span class="normal"><a href="#__codelineno-0-786">786</a></span>
<span class="normal"><a href="#__codelineno-0-787">787</a></span>
<span class="normal"><a href="#__codelineno-0-788">788</a></span>
<span class="normal"><a href="#__codelineno-0-789">789</a></span>
<span class="normal"><a href="#__codelineno-0-790">790</a></span>
<span class="normal"><a href="#__codelineno-0-791">791</a></span>
<span class="normal"><a href="#__codelineno-0-792">792</a></span>
<span class="normal"><a href="#__codelineno-0-793">793</a></span>
<span class="normal"><a href="#__codelineno-0-794">794</a></span>
<span class="normal"><a href="#__codelineno-0-795">795</a></span>
<span class="normal"><a href="#__codelineno-0-796">796</a></span>
<span class="normal"><a href="#__codelineno-0-797">797</a></span>
<span class="normal"><a href="#__codelineno-0-798">798</a></span>
<span class="normal"><a href="#__codelineno-0-799">799</a></span>
<span class="normal"><a href="#__codelineno-0-800">800</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-738" name="__codelineno-0-738"></a><span class="k">def</span><span class="w"> </span><span class="nf">depth_snapshot</span><span class="p">(</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">levels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]]:</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a><span class="sd">    Get a snapshot of the order book depth.</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a><span class="sd">    levels : int, default=5</span>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a><span class="sd">        The number of price levels to include in the snapshot.</span>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a><span class="sd">    -------</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a><span class="sd">    Dict[str, List[Tuple[float, float]]]</span>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a><span class="sd">        A dictionary with &#39;bids&#39; and &#39;asks&#39; keys, each with a list of</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a><span class="sd">        (price, quantity) tuples representing the order book depth.</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a><span class="sd">    -----</span>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a><span class="sd">    This method provides a view of the current state of the order book,</span>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a><span class="sd">    showing the available liquidity at different price levels. This is</span>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a><span class="sd">    useful for market data display and analysis.</span>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a>
<a id="__codelineno-0-761" name="__codelineno-0-761"></a><span class="sd">    The depth snapshot is often used to create a &quot;market depth&quot; or &quot;level 2&quot;</span>
<a id="__codelineno-0-762" name="__codelineno-0-762"></a><span class="sd">    view of the market, showing the available liquidity at different price</span>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a><span class="sd">    points.</span>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a><span class="sd">    Examples</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a><span class="sd">    --------</span>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a><span class="sd">    &gt;&gt;&gt; book = OrderBook(&quot;AAPL&quot;)</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a><span class="sd">    &gt;&gt;&gt; buy_order = Order(</span>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a><span class="sd">    ...     instrument_id=&quot;AAPL&quot;,</span>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a><span class="sd">    ...     side=&quot;buy&quot;,</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a><span class="sd">    ...     quantity=10,</span>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a><span class="sd">    ...     price=150.0,</span>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a><span class="sd">    ...     trader_id=&quot;trader1&quot;</span>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a><span class="sd">    ... )</span>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a><span class="sd">    &gt;&gt;&gt; book.add_order(buy_order)</span>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a><span class="sd">    []</span>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a><span class="sd">    &gt;&gt;&gt; sell_order = Order(</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a><span class="sd">    ...     instrument_id=&quot;AAPL&quot;,</span>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a><span class="sd">    ...     side=&quot;sell&quot;,</span>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a><span class="sd">    ...     quantity=5,</span>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a><span class="sd">    ...     price=151.0,</span>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a><span class="sd">    ...     trader_id=&quot;trader2&quot;</span>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a><span class="sd">    ... )</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a><span class="sd">    &gt;&gt;&gt; book.add_order(sell_order)</span>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a><span class="sd">    []</span>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a><span class="sd">    &gt;&gt;&gt; depth = book.depth_snapshot()</span>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a><span class="sd">    &gt;&gt;&gt; depth[&quot;bids&quot;]</span>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a><span class="sd">    [(150.0, 10.0)]</span>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a><span class="sd">    &gt;&gt;&gt; depth[&quot;asks&quot;]</span>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a><span class="sd">    [(151.0, 5.0)]</span>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a>    <span class="n">bids</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a>    <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bids</span><span class="p">[:</span><span class="n">levels</span><span class="p">]:</span>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a>        <span class="n">bids</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">level</span><span class="o">.</span><span class="n">price</span><span class="p">,</span> <span class="n">level</span><span class="o">.</span><span class="n">total_quantity</span><span class="p">))</span>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a>    <span class="n">asks</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a>    <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">asks</span><span class="p">[:</span><span class="n">levels</span><span class="p">]:</span>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a>        <span class="n">asks</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">level</span><span class="o">.</span><span class="n">price</span><span class="p">,</span> <span class="n">level</span><span class="o">.</span><span class="n">total_quantity</span><span class="p">))</span>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a>    <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bids&quot;</span><span class="p">:</span> <span class="n">bids</span><span class="p">,</span> <span class="s2">&quot;asks&quot;</span><span class="p">:</span> <span class="n">asks</span><span class="p">}</span>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intern_trading_game.domain.exchange.order_book.OrderBook.get_order" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_order</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_order</span><span class="p">(</span><span class="n">order_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Order</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get an order from the book by its ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>order_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the order to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="Order


  
      dataclass
   (intern_trading_game.domain.exchange.order.Order)" href="../order/#intern_trading_game.domain.exchange.order.Order">Order</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The order with the specified ID, or None if not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>This method searches for an order in the book by its ID. It uses the
order_price_map to quickly determine which side of the book to search
and at which price level.</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">OrderBook</span><span class="p">(</span><span class="s2">&quot;AAPL&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;buy&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span>    <span class="n">quantity</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">... </span>    <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader1&quot;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="go">[]</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">retrieved</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get_order</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">order_id</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">retrieved</span><span class="o">.</span><span class="n">order_id</span> <span class="o">==</span> <span class="n">order</span><span class="o">.</span><span class="n">order_id</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="go">True</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/intern_trading_game/domain/exchange/order_book.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-802">802</a></span>
<span class="normal"><a href="#__codelineno-0-803">803</a></span>
<span class="normal"><a href="#__codelineno-0-804">804</a></span>
<span class="normal"><a href="#__codelineno-0-805">805</a></span>
<span class="normal"><a href="#__codelineno-0-806">806</a></span>
<span class="normal"><a href="#__codelineno-0-807">807</a></span>
<span class="normal"><a href="#__codelineno-0-808">808</a></span>
<span class="normal"><a href="#__codelineno-0-809">809</a></span>
<span class="normal"><a href="#__codelineno-0-810">810</a></span>
<span class="normal"><a href="#__codelineno-0-811">811</a></span>
<span class="normal"><a href="#__codelineno-0-812">812</a></span>
<span class="normal"><a href="#__codelineno-0-813">813</a></span>
<span class="normal"><a href="#__codelineno-0-814">814</a></span>
<span class="normal"><a href="#__codelineno-0-815">815</a></span>
<span class="normal"><a href="#__codelineno-0-816">816</a></span>
<span class="normal"><a href="#__codelineno-0-817">817</a></span>
<span class="normal"><a href="#__codelineno-0-818">818</a></span>
<span class="normal"><a href="#__codelineno-0-819">819</a></span>
<span class="normal"><a href="#__codelineno-0-820">820</a></span>
<span class="normal"><a href="#__codelineno-0-821">821</a></span>
<span class="normal"><a href="#__codelineno-0-822">822</a></span>
<span class="normal"><a href="#__codelineno-0-823">823</a></span>
<span class="normal"><a href="#__codelineno-0-824">824</a></span>
<span class="normal"><a href="#__codelineno-0-825">825</a></span>
<span class="normal"><a href="#__codelineno-0-826">826</a></span>
<span class="normal"><a href="#__codelineno-0-827">827</a></span>
<span class="normal"><a href="#__codelineno-0-828">828</a></span>
<span class="normal"><a href="#__codelineno-0-829">829</a></span>
<span class="normal"><a href="#__codelineno-0-830">830</a></span>
<span class="normal"><a href="#__codelineno-0-831">831</a></span>
<span class="normal"><a href="#__codelineno-0-832">832</a></span>
<span class="normal"><a href="#__codelineno-0-833">833</a></span>
<span class="normal"><a href="#__codelineno-0-834">834</a></span>
<span class="normal"><a href="#__codelineno-0-835">835</a></span>
<span class="normal"><a href="#__codelineno-0-836">836</a></span>
<span class="normal"><a href="#__codelineno-0-837">837</a></span>
<span class="normal"><a href="#__codelineno-0-838">838</a></span>
<span class="normal"><a href="#__codelineno-0-839">839</a></span>
<span class="normal"><a href="#__codelineno-0-840">840</a></span>
<span class="normal"><a href="#__codelineno-0-841">841</a></span>
<span class="normal"><a href="#__codelineno-0-842">842</a></span>
<span class="normal"><a href="#__codelineno-0-843">843</a></span>
<span class="normal"><a href="#__codelineno-0-844">844</a></span>
<span class="normal"><a href="#__codelineno-0-845">845</a></span>
<span class="normal"><a href="#__codelineno-0-846">846</a></span>
<span class="normal"><a href="#__codelineno-0-847">847</a></span>
<span class="normal"><a href="#__codelineno-0-848">848</a></span>
<span class="normal"><a href="#__codelineno-0-849">849</a></span>
<span class="normal"><a href="#__codelineno-0-850">850</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-802" name="__codelineno-0-802"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Order</span><span class="p">]:</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a><span class="sd">    Get an order from the book by its ID.</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a><span class="sd">    order_id : str</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a><span class="sd">        The ID of the order to get.</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a><span class="sd">    -------</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a><span class="sd">    Optional[Order]</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a><span class="sd">        The order with the specified ID, or None if not found.</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a><span class="sd">    -----</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a><span class="sd">    This method searches for an order in the book by its ID. It uses the</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a><span class="sd">    order_price_map to quickly determine which side of the book to search</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a><span class="sd">    and at which price level.</span>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a><span class="sd">    Examples</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a><span class="sd">    --------</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a><span class="sd">    &gt;&gt;&gt; book = OrderBook(&quot;AAPL&quot;)</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a><span class="sd">    &gt;&gt;&gt; order = Order(</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a><span class="sd">    ...     instrument_id=&quot;AAPL&quot;,</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a><span class="sd">    ...     side=&quot;buy&quot;,</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a><span class="sd">    ...     quantity=10,</span>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a><span class="sd">    ...     price=150.0,</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a><span class="sd">    ...     trader_id=&quot;trader1&quot;</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a><span class="sd">    ... )</span>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a><span class="sd">    &gt;&gt;&gt; book.add_order(order)</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a><span class="sd">    []</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a><span class="sd">    &gt;&gt;&gt; retrieved = book.get_order(order.order_id)</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a><span class="sd">    &gt;&gt;&gt; retrieved.order_id == order.order_id</span>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a><span class="sd">    True</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a>    <span class="k">if</span> <span class="n">order_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_price_map</span><span class="p">:</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a>    <span class="n">price</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_price_map</span><span class="p">[</span><span class="n">order_id</span><span class="p">]</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a>    <span class="n">order_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bids</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_bid_price</span><span class="p">(</span><span class="n">price</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">asks</span>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a>    <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">order_list</span><span class="p">:</span>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a>        <span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">price</span> <span class="o">==</span> <span class="n">price</span><span class="p">:</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a>            <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">level</span><span class="o">.</span><span class="n">orders</span><span class="p">:</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a>                <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">order_id</span> <span class="o">==</span> <span class="n">order_id</span><span class="p">:</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a>                    <span class="k">return</span> <span class="n">order</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a>    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intern_trading_game.domain.exchange.order_book.OrderBook.get_recent_trades" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_recent_trades</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_recent_trades</span><span class="p">(</span><span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Trade</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the most recent trades.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>limit</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum number of trades to return.</p>
              </div>
            </td>
            <td>
                  <code>10</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Trade


  
      dataclass
   (intern_trading_game.domain.exchange.trade.Trade)" href="../trade/#intern_trading_game.domain.exchange.trade.Trade">Trade</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The most recent trades, newest first, up to the specified limit.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>This method returns the most recent trades that occurred in this order
book. The trades are returned in reverse chronological order (newest
first).</p>
<p>The order book maintains a circular buffer of the last 100 trades,
so requesting more than 100 trades will still return at most 100.</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span> <span class="o">=</span> <span class="n">OrderBook</span><span class="p">(</span><span class="s2">&quot;AAPL&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">buy_order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;buy&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span>    <span class="n">quantity</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">... </span>    <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader1&quot;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">book</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">buy_order</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="go">[]</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">sell_order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">... </span>    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;sell&quot;</span><span class="p">,</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="gp">... </span>    <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="gp">... </span>    <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader2&quot;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">trades</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">sell_order</span><span class="p">)</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">trades</span><span class="p">)</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="go">1</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">recent</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get_recent_trades</span><span class="p">()</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">recent</span><span class="p">)</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="go">1</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">recent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">quantity</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="go">5.0</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/intern_trading_game/domain/exchange/order_book.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-852">852</a></span>
<span class="normal"><a href="#__codelineno-0-853">853</a></span>
<span class="normal"><a href="#__codelineno-0-854">854</a></span>
<span class="normal"><a href="#__codelineno-0-855">855</a></span>
<span class="normal"><a href="#__codelineno-0-856">856</a></span>
<span class="normal"><a href="#__codelineno-0-857">857</a></span>
<span class="normal"><a href="#__codelineno-0-858">858</a></span>
<span class="normal"><a href="#__codelineno-0-859">859</a></span>
<span class="normal"><a href="#__codelineno-0-860">860</a></span>
<span class="normal"><a href="#__codelineno-0-861">861</a></span>
<span class="normal"><a href="#__codelineno-0-862">862</a></span>
<span class="normal"><a href="#__codelineno-0-863">863</a></span>
<span class="normal"><a href="#__codelineno-0-864">864</a></span>
<span class="normal"><a href="#__codelineno-0-865">865</a></span>
<span class="normal"><a href="#__codelineno-0-866">866</a></span>
<span class="normal"><a href="#__codelineno-0-867">867</a></span>
<span class="normal"><a href="#__codelineno-0-868">868</a></span>
<span class="normal"><a href="#__codelineno-0-869">869</a></span>
<span class="normal"><a href="#__codelineno-0-870">870</a></span>
<span class="normal"><a href="#__codelineno-0-871">871</a></span>
<span class="normal"><a href="#__codelineno-0-872">872</a></span>
<span class="normal"><a href="#__codelineno-0-873">873</a></span>
<span class="normal"><a href="#__codelineno-0-874">874</a></span>
<span class="normal"><a href="#__codelineno-0-875">875</a></span>
<span class="normal"><a href="#__codelineno-0-876">876</a></span>
<span class="normal"><a href="#__codelineno-0-877">877</a></span>
<span class="normal"><a href="#__codelineno-0-878">878</a></span>
<span class="normal"><a href="#__codelineno-0-879">879</a></span>
<span class="normal"><a href="#__codelineno-0-880">880</a></span>
<span class="normal"><a href="#__codelineno-0-881">881</a></span>
<span class="normal"><a href="#__codelineno-0-882">882</a></span>
<span class="normal"><a href="#__codelineno-0-883">883</a></span>
<span class="normal"><a href="#__codelineno-0-884">884</a></span>
<span class="normal"><a href="#__codelineno-0-885">885</a></span>
<span class="normal"><a href="#__codelineno-0-886">886</a></span>
<span class="normal"><a href="#__codelineno-0-887">887</a></span>
<span class="normal"><a href="#__codelineno-0-888">888</a></span>
<span class="normal"><a href="#__codelineno-0-889">889</a></span>
<span class="normal"><a href="#__codelineno-0-890">890</a></span>
<span class="normal"><a href="#__codelineno-0-891">891</a></span>
<span class="normal"><a href="#__codelineno-0-892">892</a></span>
<span class="normal"><a href="#__codelineno-0-893">893</a></span>
<span class="normal"><a href="#__codelineno-0-894">894</a></span>
<span class="normal"><a href="#__codelineno-0-895">895</a></span>
<span class="normal"><a href="#__codelineno-0-896">896</a></span>
<span class="normal"><a href="#__codelineno-0-897">897</a></span>
<span class="normal"><a href="#__codelineno-0-898">898</a></span>
<span class="normal"><a href="#__codelineno-0-899">899</a></span>
<span class="normal"><a href="#__codelineno-0-900">900</a></span>
<span class="normal"><a href="#__codelineno-0-901">901</a></span>
<span class="normal"><a href="#__codelineno-0-902">902</a></span>
<span class="normal"><a href="#__codelineno-0-903">903</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-852" name="__codelineno-0-852"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_recent_trades</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Trade</span><span class="p">]:</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a><span class="sd">    Get the most recent trades.</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a><span class="sd">    limit : int, default=10</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a><span class="sd">        The maximum number of trades to return.</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a><span class="sd">    -------</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a><span class="sd">    List[Trade]</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a><span class="sd">        The most recent trades, newest first, up to the specified limit.</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a><span class="sd">    -----</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a><span class="sd">    This method returns the most recent trades that occurred in this order</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a><span class="sd">    book. The trades are returned in reverse chronological order (newest</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a><span class="sd">    first).</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a><span class="sd">    The order book maintains a circular buffer of the last 100 trades,</span>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a><span class="sd">    so requesting more than 100 trades will still return at most 100.</span>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a><span class="sd">    Examples</span>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a><span class="sd">    --------</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a><span class="sd">    &gt;&gt;&gt; book = OrderBook(&quot;AAPL&quot;)</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a><span class="sd">    &gt;&gt;&gt; buy_order = Order(</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a><span class="sd">    ...     instrument_id=&quot;AAPL&quot;,</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a><span class="sd">    ...     side=&quot;buy&quot;,</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a><span class="sd">    ...     quantity=10,</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a><span class="sd">    ...     price=150.0,</span>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a><span class="sd">    ...     trader_id=&quot;trader1&quot;</span>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a><span class="sd">    ... )</span>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a><span class="sd">    &gt;&gt;&gt; book.add_order(buy_order)</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a><span class="sd">    []</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a><span class="sd">    &gt;&gt;&gt; sell_order = Order(</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a><span class="sd">    ...     instrument_id=&quot;AAPL&quot;,</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a><span class="sd">    ...     side=&quot;sell&quot;,</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a><span class="sd">    ...     quantity=5,</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a><span class="sd">    ...     price=150.0,</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a><span class="sd">    ...     trader_id=&quot;trader2&quot;</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a><span class="sd">    ... )</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a><span class="sd">    &gt;&gt;&gt; trades = book.add_order(sell_order)</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a><span class="sd">    &gt;&gt;&gt; len(trades)</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a><span class="sd">    1</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a><span class="sd">    &gt;&gt;&gt; recent = book.get_recent_trades()</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a><span class="sd">    &gt;&gt;&gt; len(recent)</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a><span class="sd">    1</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a><span class="sd">    &gt;&gt;&gt; recent[0].quantity</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a><span class="sd">    5.0</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a>    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trades</span><span class="p">)[</span><span class="o">-</span><span class="n">limit</span><span class="p">:]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="intern_trading_game.domain.exchange.order_book.PriceLevel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">PriceLevel</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">PriceLevel</span><span class="p">(</span><span class="n">price</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">orders</span><span class="p">:</span> <span class="n">deque</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(),</span> <span class="n">total_quantity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Represents a price level in the order book.</p>
<p>A price level is a collection of orders at the same price point in the order
book. Orders at the same price level are prioritized by time (first in, first
out). The price level tracks the total quantity of all orders at this price,
which is used for market depth calculations.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>price</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The price level. This is the price at which all orders in this level
will execute.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>orders</code>
            </td>
            <td>
                  <code><span title="collections.deque">deque</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Queue of orders at this price level, sorted by time priority (first in,
first out). If not provided, an empty queue is created.</p>
              </div>
            </td>
            <td>
                  <code><span title="collections.deque">deque</span>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>total_quantity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Total quantity of all orders at this level. This is automatically
calculated when orders are added or removed.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="intern_trading_game.domain.exchange.order_book.PriceLevel.price">price</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The price level.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="intern_trading_game.domain.exchange.order_book.PriceLevel.orders">orders</span></code></td>
            <td>
                  <code><span title="collections.deque">deque</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Queue of orders at this price level (time priority).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="intern_trading_game.domain.exchange.order_book.PriceLevel.total_quantity">total_quantity</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Total quantity of all orders at this level.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>Price levels are a key concept in order book management. They allow for
efficient organization of orders by price, which is essential for
implementing price-time priority matching algorithms.</p>
<p>The total quantity at a price level is an important metric for market
participants, as it indicates the liquidity available at that price.</p>
<p>In a limit order book, price levels are typically organized in two separate
lists:</p>
<ol>
<li>Bid price levels (buy orders) - sorted in descending order (highest first)</li>
<li>Ask price levels (sell orders) - sorted in ascending order (lowest first)</li>
</ol>
<p>This organization allows for efficient matching of incoming orders against
the best available prices.</p>
</details>

<details class="tradingcontext" open>
  <summary>TradingContext</summary>
  <p>This implementation assumes:
- Price-time priority (orders at the same price are executed in time order)
- No hidden or iceberg orders (all order quantity is visible)
- No pro-rata matching (where orders at the same price are matched
  proportionally to their size)
- No minimum quantity requirements for order matching</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <p>Creating a price level and adding orders:</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">.order</span><span class="w"> </span><span class="kn">import</span> <span class="n">Order</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">level</span> <span class="o">=</span> <span class="n">PriceLevel</span><span class="p">(</span><span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">buy_order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span>    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;buy&quot;</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">... </span>    <span class="n">quantity</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">... </span>    <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader1&quot;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">level</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">buy_order</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">level</span><span class="o">.</span><span class="n">total_quantity</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="go">10.0</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">second_order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="gp">... </span>    <span class="n">instrument_id</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="gp">... </span>    <span class="n">side</span><span class="o">=</span><span class="s2">&quot;buy&quot;</span><span class="p">,</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="gp">... </span>    <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="gp">... </span>    <span class="n">price</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="gp">... </span>    <span class="n">trader_id</span><span class="o">=</span><span class="s2">&quot;trader2&quot;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">level</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">second_order</span><span class="p">)</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">level</span><span class="o">.</span><span class="n">total_quantity</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="go">15.0</span>
</code></pre></div>










  <div class="doc doc-children">







<h5 id="intern_trading_game.domain.exchange.order_book.PriceLevel-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="intern_trading_game.domain.exchange.order_book.PriceLevel.add_order" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_order</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">add_order</span><span class="p">(</span><span class="n">order</span><span class="p">:</span> <span class="n">Order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Add an order to this price level.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>order</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Order


  
      dataclass
   (intern_trading_game.domain.exchange.order.Order)" href="../order/#intern_trading_game.domain.exchange.order.Order">Order</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The order to add to this price level. The order's price should match
the price level's price.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>This method updates the total quantity of the price level by adding
the remaining quantity of the order.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src/intern_trading_game/domain/exchange/order_book.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="k">def</span><span class="w"> </span><span class="nf">add_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="n">Order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="sd">    Add an order to this price level.</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">    order : Order</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="sd">        The order to add to this price level. The order&#39;s price should match</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">        the price level&#39;s price.</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">    -----</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="sd">    This method updates the total quantity of the price level by adding</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">    the remaining quantity of the order.</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">orders</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">total_quantity</span> <span class="o">+=</span> <span class="n">order</span><span class="o">.</span><span class="n">remaining_quantity</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intern_trading_game.domain.exchange.order_book.PriceLevel.is_empty" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">is_empty</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">is_empty</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if this price level has no orders.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if there are no orders at this price level, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>Empty price levels are typically removed from the order book to
maintain efficiency.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src/intern_trading_game/domain/exchange/order_book.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="k">def</span><span class="w"> </span><span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="sd">    Check if this price level has no orders.</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="sd">    -------</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="sd">    bool</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="sd">        True if there are no orders at this price level, False otherwise.</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="sd">    -----</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="sd">    Empty price levels are typically removed from the order book to</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="sd">    maintain efficiency.</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">orders</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intern_trading_game.domain.exchange.order_book.PriceLevel.remove_order" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">remove_order</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">remove_order</span><span class="p">(</span><span class="n">order_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Order</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Remove an order from this price level by its ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>order_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the order to remove.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="Order


  
      dataclass
   (intern_trading_game.domain.exchange.order.Order)" href="../order/#intern_trading_game.domain.exchange.order.Order">Order</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The removed order, or None if not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>This method updates the total quantity of the price level by subtracting
the remaining quantity of the removed order.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src/intern_trading_game/domain/exchange/order_book.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="k">def</span><span class="w"> </span><span class="nf">remove_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Order</span><span class="p">]:</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="sd">    Remove an order from this price level by its ID.</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">    order_id : str</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="sd">        The ID of the order to remove.</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">    -------</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="sd">    Optional[Order]</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="sd">        The removed order, or None if not found.</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="sd">    -----</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">    This method updates the total quantity of the price level by subtracting</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">    the remaining quantity of the removed order.</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">order</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">orders</span><span class="p">):</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>        <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">order_id</span> <span class="o">==</span> <span class="n">order_id</span><span class="p">:</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>            <span class="n">removed_order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">orders</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">total_quantity</span> <span class="o">-=</span> <span class="n">removed_order</span><span class="o">.</span><span class="n">remaining_quantity</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">orders</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>            <span class="k">return</span> <span class="n">removed_order</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="intern_trading_game.domain.exchange.order_book.PriceLevel.update_quantity" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">update_quantity</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">update_quantity</span><span class="p">(</span><span class="n">order_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_quantity</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Update the quantity of an order at this price level.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>order_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the order to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>new_quantity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new remaining quantity for the order.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>This method updates the total quantity of the price level to reflect
the change in the order's quantity.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src/intern_trading_game/domain/exchange/order_book.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="k">def</span><span class="w"> </span><span class="nf">update_quantity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_quantity</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">    Update the quantity of an order at this price level.</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="sd">    order_id : str</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="sd">        The ID of the order to update.</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">    new_quantity : float</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="sd">        The new remaining quantity for the order.</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="sd">    Notes</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">    -----</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">    This method updates the total quantity of the price level to reflect</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="sd">    the change in the order&#39;s quantity.</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>    <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">orders</span><span class="p">:</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>        <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">order_id</span> <span class="o">==</span> <span class="n">order_id</span><span class="p">:</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>            <span class="n">old_quantity</span> <span class="o">=</span> <span class="n">order</span><span class="o">.</span><span class="n">remaining_quantity</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>            <span class="n">order</span><span class="o">.</span><span class="n">remaining_quantity</span> <span class="o">=</span> <span class="n">new_quantity</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">total_quantity</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">total_quantity</span> <span class="o">-</span> <span class="n">old_quantity</span> <span class="o">+</span> <span class="n">new_quantity</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>            <span class="p">)</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>            <span class="k">break</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.indexes", "navigation.top", "content.code.copy", "content.code.annotate", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../technical/javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../technical/javascripts/mermaid-init.js"></script>
      
    
  </body>
</html>